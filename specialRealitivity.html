<html>
<head><title>stuff</title></head>
<body>
<script src="http://www.html5canvastutorials.com/libraries/kinetic-v1.2.0.js">
</script>
<script>
window.onload = function(){
  canvas_event_handler = function(ev){
     console.log(ev.type + ", x = " + ev.layerX + ", y = " + ev.layerY);
  }
  canvas = document.getElementById("canvas");
  canvas.addEventListener('mousedown', canvas_event_handler, false);
  canvas.addEventListener('mouseup', canvas_event_handler, false);
  canvas.addEventListener('mousemove', canvas_event_handler, false);
  
  var context = canvas.getContext('2d');

  kin = new Kinetic("canvas", "2d");
  kin.setDrawStage(function(){
    kin.clear()
    var mousePos = kin.getMousePos();
    mouseX = mousePos === null ? 99999 : mousePos.x;
    mouseY = mousePos === null ? 99999 : mousePos.y;
    //console.log("mouseX = " + mouseX);
    //console.log("mouseY = " + mouseY);
    context.setTransform(1, 0, 0, 1, 0, 0);
    context.translate(mouseX, mouseY);
    context.fillStyle = "rgb(255,0,0)";
    context.fillRect(0, 0, 50, 50);
  });
  kin.startAnimation();
}
</script>
<canvas id="canvas" width="200" height="200" style="border:1px solid #000000">
This text is displayed if your browser does not support HTML5 Canvas.
</canvas>
</body>
</html>
